{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Magico/Desktop/appout/binance/front/src/app/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Home() {\r\n  const [balances, setBalances] = useState([]);\r\n  const [totalUSDT, setTotalUSDT] = useState(0);\r\n  const [freeUSDT, setFreeUSDT] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [marketData, setMarketData] = useState([]);\r\n  const [sortBy, setSortBy] = useState(\"profit\");\r\n  const [filteredData, setFilteredData] = useState([]);\r\n  const [autoTrade, setAutoTrade] = useState({});\r\n  const [activeAutoTrades, setActiveAutoTrades] = useState({});\r\n  const [tradeMessage, setTradeMessage] = useState({});\r\n  const [lastTrade, setLastTrade] = useState({});\r\n\r\n  const fetchMarketData = async () => {\r\n    try {\r\n      const response = await axios.get(\"http://localhost:5000/api/trade/market\");\r\n      setMarketData(response.data.marketData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching market data:\", error);\r\n    }\r\n  };\r\n  \r\n  const fetchBalance = async () => {\r\n    try {\r\n      const response = await axios.get(\"http://localhost:5000/api/trade/balance\");\r\n      setBalances(response.data.balances);\r\n      setTotalUSDT(response.data.totalUSDT);\r\n      setFreeUSDT(response.data.freeUSDT);\r\n    } catch (error) {\r\n      console.error(\"Error fetching balance:\", error);\r\n    }\r\n  };\r\n  \r\n  const handleTrade = async (symbol, side, price = null) => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.post(\"http://localhost:5000/api/trade/order\", { symbol, side, price });\r\n      setTradeMessage((prev) => ({\r\n        ...prev,\r\n        [symbol]: { text: `✅ ${side} ناجح`, color: side === \"BUY\" ? \"text-red-500\" : \"text-green-500\" }\r\n      }));\r\n      setLastTrade((prev) => ({\r\n        ...prev,\r\n        [symbol]: { side, color: side === \"BUY\" ? \"text-red-500\" : \"text-green-500\" }\r\n      }));\r\n      await fetchBalance();\r\n    } catch (error) {\r\n      setTradeMessage((prev) => ({\r\n        ...prev,\r\n        [symbol]: { text: \"❌ فشل التداول\", color: \"text-gray-500\" }\r\n      }));\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const toggleAutoTrade = (symbol) => {\r\n    setActiveAutoTrades((prev) => ({\r\n      ...prev,\r\n      [symbol]: !prev[symbol]\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchBalance();\r\n    fetchMarketData();\r\n    const interval = setInterval(fetchMarketData, 10000);\r\n    return () => clearInterval(interval);\r\n  }, [sortBy]);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        const marketPrices = await axios.get(\"http://localhost:5000/api/trade/market\");\r\n        marketPrices.data.marketData.forEach((data) => {\r\n          if (activeAutoTrades[data.asset] && autoTrade[data.asset]) {\r\n            if (autoTrade[data.asset].buyPrice && data.lastPrice <= autoTrade[data.asset].buyPrice) {\r\n              handleTrade(data.asset, \"BUY\", autoTrade[data.asset].buyPrice);\r\n            }\r\n            if (autoTrade[data.asset].sellPrice && data.lastPrice >= autoTrade[data.asset].sellPrice) {\r\n              handleTrade(data.asset, \"SELL\", autoTrade[data.asset].sellPrice);\r\n            }\r\n          }\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error checking auto trade conditions:\", error);\r\n      }\r\n    }, 5000);\r\n    return () => clearInterval(interval);\r\n  }, [activeAutoTrades, autoTrade]);\r\n\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col items-center justify-center bg-gray-100 p-6\">\r\n      <h1 className=\"text-3xl font-bold mb-4\">My Binance Balance</h1>\r\n      <div className=\"bg-white shadow-lg rounded-lg p-6 w-full max-w-3xl\">\r\n      <table className=\"w-full border-collapse border border-gray-300\">\r\n          <thead>\r\n            <tr className=\"bg-gray-200\">\r\n              <th className=\"p-2 border\">Asset</th>\r\n              <th className=\"p-2 border\">Free Balance</th>\r\n              <th className=\"p-2 border\">Value in USDT</th>\r\n              <th className=\"p-2 border\">Profit/Loss %</th>\r\n              <th className=\"p-2 border\">Last Trade</th>\r\n              <th className=\"p-2 border\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {balances.map((balance, index) => (\r\n              <tr key={index} className=\"border\">\r\n                <td className=\"p-2 border\">{balance.asset}</td>\r\n                <td className=\"p-2 border\">{balance.free}</td>\r\n                <td className=\"p-2 border\">${balance.valueInUSDT}</td>\r\n                <td className={`p-2 border font-bold ${balance.profitLossPercent >= 0 ? \"text-green-500\" : \"text-red-500\"}`}>{balance.profitLossPercent}%</td>\r\n                <td className={`p-2 border font-bold ${lastTrade[balance.asset]?.color || \"text-gray-500\"}`}>{lastTrade[balance.asset]?.side || \"-\"}</td>\r\n                <td className=\"p-2 border flex flex-col gap-2\">\r\n                  <input type=\"number\" placeholder=\"Buy Price\" className=\"p-1 border rounded\" onChange={(e) => setAutoTrade({ ...autoTrade, [balance.asset]: { ...autoTrade[balance.asset], buyPrice: parseFloat(e.target.value) } })} />\r\n                  <button className=\"bg-green-500 text-white px-3 py-1 rounded\" onClick={() => handleTrade(balance.asset, \"BUY\")} disabled={loading}>{loading ? \"Processing...\" : \"Buy 100%\"}</button>\r\n                  <input type=\"number\" placeholder=\"Sell Price\" className=\"p-1 border rounded\" onChange={(e) => setAutoTrade({ ...autoTrade, [balance.asset]: { ...autoTrade[balance.asset], sellPrice: parseFloat(e.target.value) } })} />\r\n                  <button className=\"bg-red-500 text-white px-3 py-1 rounded\" onClick={() => handleTrade(balance.asset, \"SELL\")} disabled={loading}>{loading ? \"Processing...\" : \"Sell 100%\"}</button>\r\n                  <button  disabled={loading} className={`px-3 py-1 rounded ${activeAutoTrades[balance.asset] ? \"bg-gray-500\" : \"bg-blue-500\"} text-white`} onClick={() => toggleAutoTrade(balance.asset)}>\r\n                    {activeAutoTrades[balance.asset] ? \"إيقاف التداول التلقائي\" : \"بدء التداول التلقائي\"}\r\n                  </button>\r\n                  {tradeMessage[balance.asset] && (\r\n                    <p className={`mt-2 font-bold ${tradeMessage[balance.asset].color}`}>{tradeMessage[balance.asset].text}</p>\r\n                  )}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n\r\n        <div className=\"mt-4 p-4 bg-gray-200 text-lg font-semibold text-center\">\r\n          <p>Total USDT: <span className=\"text-green-600\">${totalUSDT} USDT</span></p>\r\n          <p>Available USDT: <span className=\"text-blue-600\">${freeUSDT} USDT</span></p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"min-h-screen flex flex-col items-center justify-center bg-gray-100 p-6\">\r\n      <h1 className=\"text-3xl font-bold mb-4\">Market Prices</h1>\r\n\r\n      {/* 🔹 أزرار التصفية */}\r\n      <div className=\"mb-4 flex gap-2\">\r\n        <button\r\n          className={`px-4 py-2 rounded ${sortBy === \"profit\" ? \"bg-blue-500 text-white\" : \"bg-gray-300\"}`}\r\n          onClick={() => setSortBy(\"profit\")}\r\n        >\r\n          أعلى ربح 📈\r\n        </button>\r\n        <button\r\n          className={`px-4 py-2 rounded ${sortBy === \"loss\" ? \"bg-red-500 text-white\" : \"bg-gray-300\"}`}\r\n          onClick={() => setSortBy(\"loss\")}\r\n        >\r\n          أعلى خسارة 📉\r\n        </button>\r\n        <button\r\n          className={`px-4 py-2 rounded ${sortBy === \"new\" ? \"bg-green-500 text-white\" : \"bg-gray-300\"}`}\r\n          onClick={() => setSortBy(\"new\")}\r\n        >\r\n          الأحدث 🔄\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"bg-white shadow-lg rounded-lg p-6 w-full max-w-3xl\">\r\n        <table className=\"w-full border-collapse border border-gray-300\">\r\n          <thead>\r\n            <tr className=\"bg-gray-200\">\r\n              <th className=\"p-2 border\">العملة</th>\r\n              <th className=\"p-2 border\">السعر الأخير</th>\r\n              <th className=\"p-2 border\">نسبة التغيير (24 ساعة)</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredData.map((data, index) => (\r\n              <tr key={index} className=\"border\">\r\n                <td className=\"p-2 border\">{data.asset}</td>\r\n                <td className=\"p-2 border\">${data.lastPrice}</td>\r\n                <td\r\n                  className={`p-2 border font-bold ${\r\n                    data.changePercent >= 0 ? \"text-green-500\" : \"text-red-500\"\r\n                  }`}\r\n                >\r\n                  {data.changePercent}%\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 582, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}